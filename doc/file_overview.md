# XRANKINGアプリケーション - ファイル概要

## 設定ファイル

### next.config.js
- **機能**: Next.jsアプリケーションの設定ファイル
- **主要機能**: PWA設定、画像ドメイン設定、セキュリティヘッダー設定、リダイレクトルール設定
- **用途**: アプリケーションの基本設定、セキュリティ管理、パフォーマンス最適化

### tailwind.config.js
- **機能**: Tailwind CSSの設定ファイル
- **主要機能**: コンテンツパス設定、ダークモード設定、カスタムアニメーション定義、テーマ拡張設定
- **用途**: スタイリングの一元管理、レスポンシブデザイン実装、カスタムコンポーネントスタイリング

### build-fix.js
- **機能**: Next.jsアプリケーションのビルドプロセスを最適化・修正するスクリプト
- **主要機能**: ビルド前クリーンアップ、Next.jsビルド実行、ビルド成果物検証、エラーハンドリング
- **用途**: ビルドプロセス自動化、エラー修正、開発環境整備、デプロイ準備

### server.js
- **機能**: Next.jsアプリケーションのカスタムサーバー実装
- **主要機能**: カスタムHTTPサーバー提供、プリレンダリングマニフェスト管理、静的ファイル提供、ルーティング処理
- **用途**: 本番環境でのアプリ実行、カスタムサーバー設定実装、パフォーマンス最適化

## データベース関連ファイル

### db.js
- **機能**: SQLサーバーデータベース接続管理モジュール
- **主要機能**: データベース接続設定、接続プール管理、エラーハンドリング、接続最適化
- **用途**: データベース操作の一元化、接続効率の最適化、エラー処理統一

### database.js
- **機能**: データベース操作管理モジュール
- **主要機能**: 接続管理、クエリ実行、データ取得・更新、エラーハンドリング
- **用途**: ツイートデータの取得、操作のカプセル化

### test.js
- **機能**: データベース接続テストスクリプト
- **主要機能**: 接続テスト、状態検証、エラーハンドリング、ログ出力
- **用途**: 開発時のデータベース接続確認、問題診断

## アプリケーションコンポーネント

### components/VideoPlayer.tsx
- **機能**: カスタムビデオプレーヤーコンポーネント
- **主要機能**: ビデオ再生制御、ボリューム調整、フルスクリーン表示、再生進行状況表示
- **用途**: 動画コンテンツ再生、ユーザー操作カスタマイズ、視覚的フィードバック

### components/mobile/MobileVideoFeed.tsx
- **機能**: モバイル向けビデオフィードコンポーネント
- **主要機能**: スワイプナビゲーション、自動再生、動画プリロード、インタラクション処理
- **用途**: モバイル最適化ビデオ表示、スワイプUX、効率的なデータロード

### components/Header.tsx, Footer.tsx等
- **機能**: 各種UIコンポーネント
- **主要機能**: ナビゲーション、UI要素表示、インタラクション
- **用途**: ユーザーインターフェース構築、一貫したデザイン提供

## APIルート

### app/api/tweets/route.ts
- **機能**: ツイート一覧取得APIエンドポイント
- **主要機能**: データベースからのツイート情報取得、期間フィルタリング、ソート、ページネーション処理
- **用途**: フロントエンドへのデータ提供、フィルタリング、ペジネーション対応

### app/api/video/[id]/route.ts
- **機能**: 特定ビデオ情報取得APIエンドポイント
- **主要機能**: IDに基づくビデオデータ取得、データ変換、エラーハンドリング
- **用途**: 個別ビデオデータのフロントエンドへの提供

### app/api/video-proxy/route.ts
- **機能**: ビデオプロキシAPIエンドポイント
- **主要機能**: 外部ビデオのプロキシ、CORS対応、キャッシュ制御、エラーハンドリング
- **用途**: クロスオリジンリソース共有問題の解決、ビデオストリーミング改善

### app/api/proxy/route.ts
- **機能**: 汎用プロキシAPIエンドポイント
- **主要機能**: 外部リソースへのプロキシ、ヘッダー管理、リクエスト転送、エラーハンドリング
- **用途**: CORS問題解決、外部APIアクセス

## ユーティリティ

### app/utils/videoUtils.ts
- **機能**: ビデオ処理ユーティリティ関数群
- **主要機能**: ビデオ要素のメモリ管理、ビデオ再生制御、エラーハンドリング、パフォーマンス最適化
- **用途**: ビデオプレーヤー制御、メモリリーク防止、再生エラー処理

### app/utils/tweetProcessors.ts
- **機能**: ツイートデータの処理ユーティリティ
- **主要機能**: Twitterレスポンス処理、データ正規化、デフォルト値設定、URL生成
- **用途**: データ標準化、フロントエンド表示最適化、エラー値処理

### lib/utils.ts
- **機能**: 汎用ユーティリティ関数群
- **主要機能**: 日付フォーマット、文字列操作、配列操作、オブジェクト変換
- **用途**: アプリケーション全体での共通操作、コード重複削減

### lib/twitter.ts
- **機能**: Twitter API連携モジュール
- **主要機能**: Twitter APIリクエスト、認証管理、データ取得、レスポンス処理
- **用途**: ツイートデータの取得、API連携の一元管理

### lib/prisma.ts
- **機能**: Prisma ORM設定と初期化
- **主要機能**: データベース接続管理、スキーマ連携、クエリ最適化
- **用途**: 型安全なデータベース操作、データアクセスの簡略化

## レイアウトとページ

### app/layout.tsx
- **機能**: ルートレイアウトコンポーネント
- **主要機能**: グローバルスタイル適用、メタデータ設定、レイアウト構造定義、SEO最適化
- **用途**: アプリケーション全体の外枠構造、共通UI要素

### app/mobile/layout.tsx
- **機能**: モバイル用レイアウトコンポーネント
- **主要機能**: ビューポート設定、モバイル最適化スタイル、パフォーマンス最適化
- **用途**: モバイルデバイス向け表示の最適化

### app/page.tsx, app/mobile/page.tsx
- **機能**: メインページとモバイルページのコンポーネント
- **主要機能**: データフェッチ、UIレンダリング、状態管理、インタラクション処理
- **用途**: アプリケーションの主要ビュー、ユーザーインターフェース

### app/loading.tsx
- **機能**: ローディング状態コンポーネント
- **主要機能**: ローディングインジケータ表示、ユーザーフィードバック、状態管理
- **用途**: データロード中のUX改善、視覚的フィードバック提供

### app/error.tsx
- **機能**: エラーハンドリングコンポーネント
- **主要機能**: エラー状態管理、ユーザーフィードバック、リカバリーオプション
- **用途**: エラー表示の一元化、ユーザーエクスペリエンス向上

### app/providers.tsx
- **機能**: アプリケーションのプロバイダー設定コンポーネント
- **主要機能**: React Queryクライアント初期化、グローバルプロバイダー設定、クエリキャッシュ設定
- **用途**: データフェッチ最適化、状態管理、キャッシュ戦略実装

## 型定義

### app/types/index.ts
- **機能**: アプリケーション全体の型定義ファイル
- **主要機能**: ツイートデータの型定義、処理済みツイート型定義、期間・ソート・ロード状態型定義
- **用途**: 型安全なコード、コード補完、データ構造の標準化 